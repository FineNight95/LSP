## Thread cancellability type

- Make the thread cancellable at any time
- But mark it in a noncancelable state for now
- ... while itâ€™s working
- ... and until we enable cancellations
- The thread gets cancelled automatically, no need to reach a cancellation point

![11.png](11.png)

### canceltest2.c
```
void * thread_func(void * arh)
{
  pthread_setcanceltype(PTHREAD_CANCEL_ASYNCHRONOUS, NULL);
  pthread_setcancelsate(PTHREAD_CANCEL_DISABLE, NULL);
  for(i=0; i<4; i++)
  {
    sleep(1);
	printf("I am still running!\n");
  }
  pthread_setcancelsate(PTHREAD_CANCEL_ENABLE, NULL);
  pthread_testcancel();
  printf("YOU WILL NOT STOP ME!!!\n");
}
```

Compile with support for threads:
```
gcc canceltest.c -o canceltest -lpthread
```
