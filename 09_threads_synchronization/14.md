## Mutex example

- Define mutex and balance variables
- Define thread function: Lock the mutex
- Add the **deposit** amount to the **balance**
- Print the **balance** and unlock the mutex
- Create thread one with **deposit** = 200, notify if failed
- Create thread two with **deposit** = 200, notify if failed
- Wait for both threads and exit with success

### thread-mutex.c

```
#include<pthread.h>
pthread_mutex_t mutex1 = PTHREAD_MUTEX_INITIALIZER;
int balance = 1000;
void *deposit(void *arg)
{
  pthread_mutex_lock(&mutex1);
  int deposit_amount = *(int *)arg;
  balance += deposit_amount;
  printf("balance value: %d\n", balance);
  pthread_mutex_unlock(&mutex1);
}
void main()
{
  int rc1, rc2;
  pthread_t thread1, thread2;
  int deposit_amount = 200;
  if((rc1 = pthread_create(&thread1, NULL, &deposit, &deposit_amount)))
  {
    printf("Thread creation failed: %d\n", rc1);
  }  
  if((rc2 = pthread_create(&thread2, NULL, &deposit, &deposit_amount)))
  {
    printf("Thread creation failed: %d\n", rc2);
  }  
  pthread_join(thread1, NULL);
  pthread_join(thread2, NULL);
  exit(EXIT_SUCCESS);
}
```